script.js

let tasks = [];
let currentFilter = "all";
let sortByDate = false;
let sortByPrio = false;
let searchQuery = "";

// Load tasks from localStorage when page loads
window.onload = function() {
    const savedTasks = localStorage.getItem("tasks");
    if (savedTasks) {
        tasks = JSON.parse(savedTasks);
        displaytask();
    }
};

function addtask() {
    const txt = document.getElementById("content").value.trim();
    const dueDate = document.getElementById("dueDate").value;
    const priority = document.getElementById("priority").value;

    if (txt === '') return;

    tasks.push({ text: txt, completed: false, dueDate: dueDate, priority: priority });
    clearInputs();
    saveTasks();
    displaytask();
}

function clearInputs() {
    document.getElementById("content").value = "";
    document.getElementById("dueDate").value = "";
    document.getElementById("priority").value = "Medium";
}

function deletetask(index) {
    tasks.splice(index, 1);
    saveTasks();
    displaytask();
}

function toggleComplete(index) {
    tasks[index].completed = !tasks[index].completed;
    saveTasks();
    displaytask();
}

function editTask(index) {
    const task = tasks[index];
    document.getElementById("content").value = task.text;
    document.getElementById("dueDate").value = task.dueDate || "";
    document.getElementById("priority").value = task.priority;

    // Replace Add button with Save button temporarily
    document.querySelector("button[onclick='addtask()']").style.display = "none";
    let saveBtn = document.getElementById("saveBtn");
    if (!saveBtn) {
        saveBtn = document.createElement("button");
        saveBtn.id = "saveBtn";
        saveBtn.innerText = "Save Changes";
        saveBtn.onclick = function() { saveEdit(index); };
        document.body.insertBefore(saveBtn, document.getElementById("demo"));
    }
}

function saveEdit(index) {
    const txt = document.getElementById("content").value.trim();
    const dueDate = document.getElementById("dueDate").value;
    const priority = document.getElementById("priority").value;

    if (txt === '') return;

    tasks[index].text = txt;
    tasks[index].dueDate = dueDate;
    tasks[index].priority = priority;

    clearInputs();
    saveTasks();
    displaytask();

    // Restore Add button
    document.querySelector("button[onclick='addtask()']").style.display = "inline-block";
    document.getElementById("saveBtn").remove();
}

function displaytask() {
    let list = "";
    let filteredTasks = tasks.filter(task => {
        if (currentFilter === "active") return !task.completed;
        if (currentFilter === "completed") return task.completed;
        return true;
    });

    if (searchQuery) {
        filteredTasks = filteredTasks.filter(task =>
            task.text.toLowerCase().includes(searchQuery.toLowerCase())
        );
    }

    if (sortByDate) {
        filteredTasks.sort((a, b) => {
            if (!a.dueDate) return 1;
            if (!b.dueDate) return -1;
            return new Date(a.dueDate) - new Date(b.dueDate);
        });
    }

    if (sortByPrio) {
        const priorityOrder = { High: 1, Medium: 2, Low: 3 };
        filteredTasks.sort((a, b) => priorityOrder[a.priority] - priorityOrder[b.priority]);
    }

    for (let i = 0; i < filteredTasks.length; i++) {
        const taskIndex = tasks.indexOf(filteredTasks[i]);
        const taskClass = filteredTasks[i].completed ? "completed" : "";
        const due = filteredTasks[i].dueDate ? ` (Due: ${filteredTasks[i].dueDate})` : "";
        const prio = ` [${filteredTasks[i].priority}]`;
        list += `<li class="${taskClass}">
                    <span onclick="toggleComplete(${taskIndex})">${filteredTasks[i].text}${due}${prio}</span>
                    <button onclick="editTask(${taskIndex})">Edit</button>
                    <button onclick="deletetask(${taskIndex})">x</button>
                 </li>`;
    }
    document.getElementById("demo").innerHTML = list;
}

function removeall() {
    tasks = [];
    saveTasks();
    displaytask();
}

function saveTasks() {
    localStorage.setItem("tasks", JSON.stringify(tasks));
}

function setFilter(filter) {
    currentFilter = filter;
    displaytask();
}

function sortByDueDate() {
    sortByDate = !sortByDate;
    displaytask();
}

function sortByPriority() {
    sortByPrio = !sortByPrio;
    displaytask();
}

function searchTasks() {
    searchQuery = document.getElementById("searchBar").value;
    displaytask();
}


index.innerHTML

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>To-Do List</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <textarea id="content" placeholder="Enter task"></textarea>
    <input type="date" id="dueDate">
    <select id="priority">
        <option value="Low">Low</option>
        <option value="Medium" selected>Medium</option>
        <option value="High">High</option>
    </select>
    <button onclick="addtask()">Add Task</button>
    <button onclick="removeall()">Clear All</button>

    <div>
        <button onclick="setFilter('all')">All</button>
        <button onclick="setFilter('active')">Active</button>
        <button onclick="setFilter('completed')">Completed</button>
        <button onclick="sortByDueDate()">Sort by Due Date</button>
        <button onclick="sortByPriority()">Sort by Priority</button>
    </div>

    <input type="text" id="searchBar" placeholder="Search tasks..." onkeyup="searchTasks()">

    <ul id="demo"></ul>

    <script src="script.js"></script>
</body> 
</html>

style.css

.completed {
    text-decoration: line-through;
    color: gray;
}
li {
    margin: 5px 0;
}
button {
    margin-left: 10px;
}
span {
    cursor: pointer;
}
div {
    margin: 10px 0;
}
#searchBar {
    margin: 10px 0;
    padding: 5px;
    width: 200px;
}
